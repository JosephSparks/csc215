 AS V1.42 Beta [Bld 183] - Source File divi.asm - Page 1 - 12/04/2020 09:35:07 PM


       1/       0 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
       2/       0 :                     ;
       3/       0 :                     ; NAME:    divi.asm
       4/       0 :                     ; EDITOR:  Kevin Cole ("The Ubuntourist") <kevin.cole@novawebdevelopment.org>
       5/       0 :                     ; LASTMOD: 2020.11.22 (kjc)
       6/       0 :                     ;
       7/       0 :                     ; DESCRIPTION:
       8/       0 :                     ;
       9/       0 :                     ;     Divide the contents of register pair BC by D.
      10/       0 :                     ;     C will contain the quotient; B will contain the remainder.
      11/       0 :                     ;
      12/       0 :                     ;     See Intel 8080 Assembly Prograamming Manual, pages 53-56.
      13/       0 :                     ;
      14/       0 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      15/       0 :                     
      16/       0 :                     	ORG	000h
      17/       0 :                     
      18/       0 : 06 00               	MVI	B,00h
      19/       2 : 0E 63               	MVI	C,63h	; dividend (BC) = 99 decimal
      20/       4 : 16 00               	MVI	D,00h
      21/       6 : 1E 09               	MVI	E,09h	; divisor  (DE) =  9 decimal
      22/       8 :                     
      23/       8 : 7A                  DIVI:	MOV	A,D	; Negate the divisor
      24/       9 : 2F                  	CMA		;    "    "     "
      25/       A : 57                  	MOV	D,A	;    "    "     "
      26/       B : 7B                  	MOV	A,E	;    "    "     "
      27/       C : 2F                  	CMA		;    "    "     "
      28/       D : 5F                  	MOV	E,A	;    "    "     "
      29/       E : 13                  	INX	D	; For two's complement
      30/       F : 21 00 00            	LXI	H,00h	; Initial value for remainder
      31/      12 : 3E 11               	MVI	A,11h	; Initialize loop counter
      32/      14 : E5                  DV0:	PUSH	H	; Save remainder
      33/      15 : 19                  	DAD	D	; Subtract divisor (add negative)
      34/      16 : D2 1A 00            	JNC	DV1	; Underflow. Restore register pair HL
      35/      19 : E3                  	XTHL
      36/      1A : E1                  DV1:	POP	H
      37/      1B : F5                  	PUSH	PSW	; Save loop counter
      38/      1C : 79                  	MOV	A,C
      39/      1D : 17                  	RAL		; 4 register left shift?
      40/      1E : 4F                  	MOV	C,A	; CY->C->B->L->H?
      41/      1F : 78                  	MOV	A,B
      42/      20 : 17                  	RAL
      43/      21 : 47                  	MOV	B,A
      44/      22 : 7D                  	MOV	A,L
      45/      23 : 17                  	RAL
      46/      24 : 6F                  	MOV	L,A
      47/      25 : 7C                  	MOV	A,H
      48/      26 : 17                  	RAL
      49/      27 : 67                  	MOV	H,A
      50/      28 : F1                  	POP	PSW
      51/      29 : 3D                  	DCR	A
      52/      2A : C2 14 00            	JNZ	DV0
      53/      2D :                     
      54/      2D :                     ; Post-divide clean-up:
      55/      2D :                     ; Shift remainder right and return in DE
      56/      2D :                     
      57/      2D : B7                  	ORA	A
      58/      2E : 7C                  	MOV	A,H
      59/      2F : 1F                  	RAR
      60/      30 : 57                  	MOV	D,A
 AS V1.42 Beta [Bld 183] - Source File divi.asm - Page 2 - 12/04/2020 09:35:07 PM


      61/      31 : 7D                  	MOV	A,L
      62/      32 : 1F                  	RAR
      63/      33 : 5F                  	MOV	E,A
      64/      34 : 76                  	HLT
      65/      35 :                     
      66/      35 :                     	END		; End
 AS V1.42 Beta [Bld 183] - Source File divi.asm - Page 3 - 12/04/2020 09:35:07 PM


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
*BIGENDIAN :                      0 - | *BRANCHEXT :                      0 - |
*CASESENSITIVE :                  0 - | *CONSTPI :        3.141592653589793 - |
*DATE :                "12/04/2020" - | *DIVI :                           8 C |
 DV0 :                           14 C |  DV1 :                           1A C |
*FALSE :                          0 - | *FULLPMMU :                       1 - |
*HAS64 :                          1 - | *HASDSP :                         0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
*INEXTMODE :                      0 - | *INLWORDMODE :                    0 - |
*INMAXMODE :                      0 - | *INSRCMODE :                      0 - |
*INSUPMODE :                      0 - | *LISTON :                         1 - |
*MACEXP :                         7 - | *MOMCPU :                      8080 - |
*MOMCPUNAME :                "8080" - | *NESTMAX :                      100 - |
*PACKING :                        0 - | *PADDING :                        1 - |
*RELAXED :                        0 - | *TIME :               "09:35:07 PM" - |
*TRUE :                           1 - | *VERSION :                     142F - |
*Z80SYNTAX :                      0 - |

     32 symbols
     30 unused symbols

 AS V1.42 Beta [Bld 183] - Source File divi.asm - Page 4 - 12/04/2020 09:35:07 PM


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.00 seconds assembly time

     68 lines source file
      2 passes
      0 errors
      0 warnings
