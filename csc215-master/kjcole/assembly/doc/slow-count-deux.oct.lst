 AS V1.42 Beta [Bld 183] - Source File slow-count-deux.asm - Page 1 - 12/04/2020 09:35:07 PM


       1/       0 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
       2/       0 :                     ;
       3/       0 :                     ; NAME:    slow-count-deux.asm
       4/       0 :                     ; EDITOR:  Kevin Cole ("The Ubuntourist") <kevin.cole@novawebdevelopment.org>
       5/       0 :                     ; LASTMOD: 2020.10.06 (kjc)
       6/       0 :                     ;
       7/       0 :                     ; DESCRIPTION:
       8/       0 :                     ;
       9/       0 :                     ;     Increment a memory location each time a key is pressed.
      10/       0 :                     ;
      11/       0 :                     ;     To take full advantage of the included ANSI escape sequences,
      12/       0 :                     ;     start minicom with the `-c on` option:
      13/       0 :                     ;
      14/       0 :                     ;         $ minicom -c on altair
      15/       0 :                     ;
      16/       0 :                     ;     or include it in the MINICOM environment variable:
      17/       0 :                     ;
      18/       0 :                     ;         $ export MINICOM="-m -c on"
      19/       0 :                     ;         $ minicom altair
      20/       0 :                     ;
      21/       0 :                     ;     NOTES: For help with ANSI escape sequences see:
      22/       0 :                     ;
      23/       0 :                     ;                https://en.wikipedia.org/wiki/ANSI_escape_code
      24/       0 :                     ;
      25/       0 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      26/       0 :                     
      27/       0 :                     ;;;;;;;;;;;;;
      28/       0 :                     ; Constants ;
      29/       0 :                     ;;;;;;;;;;;;;
      30/       0 :                     
      31/       0 :                     ; ASCII characters
      32/       0 :                     
      33/       0 : =0O                 NUL:	EQU	00h	; ASCII NUL (Null)
      34/       0 : =11O                TAB:	EQU	09h	; ASCII TAB (Tab              a.k.a. Ctrl-I)
      35/       0 : =12O                LF:	EQU	0Ah	; ASCII LF  (Line Feed        a.k.a. Ctrl-J)
      36/       0 : =15O                CR:	EQU	0Dh	; ASCII CR  (Carriage Return, a.k.a. Ctrl-M)
      37/       0 : =33O                ESC:	EQU	1Bh	; ASCII ESC (Escape,          a.k.a. Ctrl-[)
      38/       0 :                     
      39/       0 :                     ; I/O
      40/       0 :                     
      41/       0 : =20O                SIO1S:	EQU	10h	; Serial I/O communications port 1 STATUS
      42/       0 : =21O                SIO1D:	EQU	11h	; Serial I/O communications port 1 DATA
      43/       0 :                     
      44/       0 : =3O                 MRST:	EQU	03h	; UART Master Reset
      45/       0 : =1O                 RCVD:	EQU	01h	; Character received
      46/       0 : =2O                 SENT:	EQU	002h	; Data sent. Output complete
      47/       0 :                     
      48/       0 :                     ; Code segment
      49/       0 :                     
      50/       0 :                     	ORG	0000h	; Load at address 0
      51/       0 :                     
      52/       0 : 076 003             	MVI	A,MRST
      53/       2 : 323 020             	OUT	SIO1S	; Reset the UART
      54/       4 : 076 025             	MVI	A,15h	; Settings: No RI, No XI, RTS Low, 8N1, /16
      55/       6 : 323 020             	OUT	SIO1S	; Configure the UART with above settings
      56/      10 :                     
      57/      10 : 001 002 001         	LXI	B,WORDS	; Point to WORDS
      58/      13 : 041 000 001         	LXI	H,WATCH	; Set location to increment
      59/      16 :                     
      60/      16 : 333 020             FETCH:	IN	SIO1S	; Check serial I/O status bit 1 (XMIT status)
 AS V1.42 Beta [Bld 183] - Source File slow-count-deux.asm - Page 2 - 12/04/2020 09:35:07 PM


      61/      20 : 346 002             	ANI	SENT	; If data not sent (i.e. XMIT not finished)...
      62/      22 : 312 016 000         	JZ	FETCH	; ...spin wheels: continue checking status. Else...
      63/      25 : 012                 	LDAX	B	; ...Fetch byte
      64/      26 : 376 000             	CPI	NUL	; ...If byte is ASCII NUL...
      65/      30 : 312 041 000         	JZ	COUNT	; ......begin counting. Else...
      66/      33 : 323 021             	OUT	SIO1D	; ......output byte
      67/      35 : 003                 	INX	B	; ......point to next byte
      68/      36 : 303 016 000         	JMP	FETCH	; ......lather, rinse, repeat: Fetch next byte.
      69/      41 :                     
      70/      41 : 333 020             COUNT:	IN	SIO1S	; Check serial I/O status bit
      71/      43 : 346 001             	ANI	RCVD	; If no data received...
      72/      45 : 312 041 000         	JZ	COUNT	; ...spin wheels: continue checking status. Else...
      73/      50 : 333 021             	IN	SIO1D	; ...read the character
      74/      52 : 376 011             	CPI	TAB	; ...If it is a TAB character...
      75/      54 : 312 065 000         	JZ	DONE	; ......stop counting. Else...
      76/      57 : 323 021             	OUT	SIO1D	; ...echo it
      77/      61 : 064                 	INR	M	; ...increment the watched counter
      78/      62 : 303 041 000         	JMP	COUNT	; ...wait for next character
      79/      65 : 156                 DONE:	MOV	L,M	; Put the contents of WATCH in the low byte of HL
      80/      66 : 351                 	PCHL		; Jump to value of WATCH to display in LEDs
      81/      67 :                     	
      82/      67 :                     ; Data segment
      83/      67 :                     
      84/     400 :                     	ORG	100h	; Load at memory locaton 256
      85/     400 :                     
      86/     400 : 000                 WATCH:	DB	00h	; Initialize to zero
      87/     401 : 002                 	DB	02h	; offset for use as high byte of HL register pair
      88/     402 :                     
      89/     402 : 033 133 062 112     WORDS:	DB	ESC,"[2J"
      90/     406 : 015 012             	DB	CR,LF
      91/     410 : 015 012 040 040     	DB	CR,LF,"            "
              414 : 040 040 040 040 
              420 : 040 040 040 040 
              424 : 040 040         
      92/     426 : 040 040 040 040     	DB	"                ",ESC,"[31m","SLOW COUNTER DEUX",ESC,"[0m",CR,LF
              432 : 040 040 040 040 
              436 : 040 040 040 040 
              442 : 040 040 040 040 
              446 : 033 133 063 061 
              452 : 155 123 114 117 
              456 : 127 040 103 117 
              462 : 125 116 124 105 
              466 : 122 040 104 105 
              472 : 125 130 033 133 
              476 : 060 155 015 012 
      93/     502 : 015 012 040 040     	DB	CR,LF,"            "
              506 : 040 040 040 040 
              512 : 040 040 040 040 
              516 : 040 040         
      94/     520 : 120 162 145 163     	DB	"Press a printable key slowly several times,"
              524 : 163 040 141 040 
              530 : 160 162 151 156 
              534 : 164 141 142 154 
              540 : 145 040 153 145 
              544 : 171 040 163 154 
              550 : 157 167 154 171 
              554 : 040 163 145 166 
              560 : 145 162 141 154 
              564 : 040 164 151 155 
              570 : 145 163 054     
 AS V1.42 Beta [Bld 183] - Source File slow-count-deux.asm - Page 3 - 12/04/2020 09:35:07 PM


      95/     573 : 015 012 040 040     	DB	CR,LF,"            "
              577 : 040 040 040 040 
              603 : 040 040 040 040 
              607 : 040 040         
      96/     611 : 167 150 151 154     	DB	"while keeping track of the number of presses.",CR,LF
              615 : 145 040 153 145 
              621 : 145 160 151 156 
              625 : 147 040 164 162 
              631 : 141 143 153 040 
              635 : 157 146 040 164 
              641 : 150 145 040 156 
              645 : 165 155 142 145 
              651 : 162 040 157 146 
              655 : 040 160 162 145 
              661 : 163 163 145 163 
              665 : 056 015 012     
      97/     670 : 015 012 040 040     	DB	CR,LF,"            "
              674 : 040 040 040 040 
              700 : 040 040 040 040 
              704 : 040 040         
      98/     706 : 124 150 145 156     	DB	"Then, press the ",ESC,"[31m","TAB",ESC,"[0m"
              712 : 054 040 160 162 
              716 : 145 163 163 040 
              722 : 164 150 145 040 
              726 : 033 133 063 061 
              732 : 155 124 101 102 
              736 : 033 133 060 155 
      99/     742 : 040 153 145 171     	DB	" key to stop.",CR,LF
              746 : 040 164 157 040 
              752 : 163 164 157 160 
              756 : 056 015 012     
     100/     761 : 015 012 040 040     	DB	CR,LF,"            "
              765 : 040 040 040 040 
              771 : 040 040 040 040 
              775 : 040 040         
     101/     777 : 104 060 055 104     	DB	"D0-D7 will equal to the number of key presses."
             1003 : 067 040 167 151 
             1007 : 154 154 040 145 
             1013 : 161 165 141 154 
             1017 : 040 164 157 040 
             1023 : 164 150 145 040 
             1027 : 156 165 155 142 
             1033 : 145 162 040 157 
             1037 : 146 040 153 145 
             1043 : 171 040 160 162 
             1047 : 145 163 163 145 
             1053 : 163 056         
     102/    1055 : 015 012             	DB	CR,LF
     103/    1057 : 015 012             	DB	CR,LF
     104/    1061 : 015 012             	DB	CR,LF
     105/    1063 : 000                 	DB	NUL	; NULL string terminator
     106/    1064 :                     
     107/    1064 :                     ; Abuse of LEDs segment
     108/    1064 :                     
     109/    1000 :                     	ORG	200h	; Load at memory location 512
     110/    1000 :                     
     111/    1000 : 351                 ABUSE:	PCHL		; Abuse the Program Counter load instruction
     112/    1001 : 351                 	PCHL		; Abuse the Program Counter load instruction
     113/    1002 : 351                 	PCHL		; Abuse the Program Counter load instruction
     114/    1003 : 351                 	PCHL		; Abuse the Program Counter load instruction
 AS V1.42 Beta [Bld 183] - Source File slow-count-deux.asm - Page 4 - 12/04/2020 09:35:07 PM


     115/    1004 : 351                 	PCHL		; Abuse the Program Counter load instruction
     116/    1005 : 351                 	PCHL		; Abuse the Program Counter load instruction
     117/    1006 : 351                 	PCHL		; Abuse the Program Counter load instruction
     118/    1007 : 351                 	PCHL		; Abuse the Program Counter load instruction
     119/    1010 : 351                 	PCHL		; Abuse the Program Counter load instruction
     120/    1011 : 351                 	PCHL		; Abuse the Program Counter load instruction
     121/    1012 : 351                 	PCHL		; Abuse the Program Counter load instruction
     122/    1013 : 351                 	PCHL		; Abuse the Program Counter load instruction
     123/    1014 : 351                 	PCHL		; Abuse the Program Counter load instruction
     124/    1015 : 351                 	PCHL		; Abuse the Program Counter load instruction
     125/    1016 : 351                 	PCHL		; Abuse the Program Counter load instruction
     126/    1017 : 351                 	PCHL		; Abuse the Program Counter load instruction
     127/    1020 : 351                 	PCHL		; Abuse the Program Counter load instruction
     128/    1021 : 351                 	PCHL		; Abuse the Program Counter load instruction
     129/    1022 : 351                 	PCHL		; Abuse the Program Counter load instruction
     130/    1023 : 351                 	PCHL		; Abuse the Program Counter load instruction
     131/    1024 : 351                 	PCHL		; Abuse the Program Counter load instruction
     132/    1025 : 351                 	PCHL		; Abuse the Program Counter load instruction
     133/    1026 : 351                 	PCHL		; Abuse the Program Counter load instruction
     134/    1027 : 351                 	PCHL		; Abuse the Program Counter load instruction
     135/    1030 : 351                 	PCHL		; Abuse the Program Counter load instruction
     136/    1031 : 351                 	PCHL		; Abuse the Program Counter load instruction
     137/    1032 : 351                 	PCHL		; Abuse the Program Counter load instruction
     138/    1033 : 351                 	PCHL		; Abuse the Program Counter load instruction
     139/    1034 : 351                 	PCHL		; Abuse the Program Counter load instruction
     140/    1035 : 351                 	PCHL		; Abuse the Program Counter load instruction
     141/    1036 : 351                 	PCHL		; Abuse the Program Counter load instruction
     142/    1037 : 351                 	PCHL		; Abuse the Program Counter load instruction
     143/    1040 : 351                 	PCHL		; Abuse the Program Counter load instruction
     144/    1041 : 351                 	PCHL		; Abuse the Program Counter load instruction
     145/    1042 : 351                 	PCHL		; Abuse the Program Counter load instruction
     146/    1043 : 351                 	PCHL		; Abuse the Program Counter load instruction
     147/    1044 : 351                 	PCHL		; Abuse the Program Counter load instruction
     148/    1045 : 351                 	PCHL		; Abuse the Program Counter load instruction
     149/    1046 : 351                 	PCHL		; Abuse the Program Counter load instruction
     150/    1047 : 351                 	PCHL		; Abuse the Program Counter load instruction
     151/    1050 : 351                 	PCHL		; Abuse the Program Counter load instruction
     152/    1051 : 351                 	PCHL		; Abuse the Program Counter load instruction
     153/    1052 : 351                 	PCHL		; Abuse the Program Counter load instruction
     154/    1053 : 351                 	PCHL		; Abuse the Program Counter load instruction
     155/    1054 : 351                 	PCHL		; Abuse the Program Counter load instruction
     156/    1055 : 351                 	PCHL		; Abuse the Program Counter load instruction
     157/    1056 : 351                 	PCHL		; Abuse the Program Counter load instruction
     158/    1057 : 351                 	PCHL		; Abuse the Program Counter load instruction
     159/    1060 : 351                 	PCHL		; Abuse the Program Counter load instruction
     160/    1061 : 351                 	PCHL		; Abuse the Program Counter load instruction
     161/    1062 : 351                 	PCHL		; Abuse the Program Counter load instruction
     162/    1063 : 351                 	PCHL		; Abuse the Program Counter load instruction
     163/    1064 : 351                 	PCHL		; Abuse the Program Counter load instruction
     164/    1065 : 351                 	PCHL		; Abuse the Program Counter load instruction
     165/    1066 : 351                 	PCHL		; Abuse the Program Counter load instruction
     166/    1067 : 351                 	PCHL		; Abuse the Program Counter load instruction
     167/    1070 : 351                 	PCHL		; Abuse the Program Counter load instruction
     168/    1071 : 351                 	PCHL		; Abuse the Program Counter load instruction
     169/    1072 : 351                 	PCHL		; Abuse the Program Counter load instruction
     170/    1073 : 351                 	PCHL		; Abuse the Program Counter load instruction
     171/    1074 : 351                 	PCHL		; Abuse the Program Counter load instruction
     172/    1075 : 351                 	PCHL		; Abuse the Program Counter load instruction
     173/    1076 : 351                 	PCHL		; Abuse the Program Counter load instruction
     174/    1077 : 351                 	PCHL		; Abuse the Program Counter load instruction
 AS V1.42 Beta [Bld 183] - Source File slow-count-deux.asm - Page 5 - 12/04/2020 09:35:07 PM


     175/    1100 : 351                 	PCHL		; Abuse the Program Counter load instruction
     176/    1101 : 351                 	PCHL		; Abuse the Program Counter load instruction
     177/    1102 : 351                 	PCHL		; Abuse the Program Counter load instruction
     178/    1103 : 351                 	PCHL		; Abuse the Program Counter load instruction
     179/    1104 : 351                 	PCHL		; Abuse the Program Counter load instruction
     180/    1105 : 351                 	PCHL		; Abuse the Program Counter load instruction
     181/    1106 : 351                 	PCHL		; Abuse the Program Counter load instruction
     182/    1107 : 351                 	PCHL		; Abuse the Program Counter load instruction
     183/    1110 : 351                 	PCHL		; Abuse the Program Counter load instruction
     184/    1111 : 351                 	PCHL		; Abuse the Program Counter load instruction
     185/    1112 : 351                 	PCHL		; Abuse the Program Counter load instruction
     186/    1113 : 351                 	PCHL		; Abuse the Program Counter load instruction
     187/    1114 : 351                 	PCHL		; Abuse the Program Counter load instruction
     188/    1115 : 351                 	PCHL		; Abuse the Program Counter load instruction
     189/    1116 : 351                 	PCHL		; Abuse the Program Counter load instruction
     190/    1117 : 351                 	PCHL		; Abuse the Program Counter load instruction
     191/    1120 : 351                 	PCHL		; Abuse the Program Counter load instruction
     192/    1121 : 351                 	PCHL		; Abuse the Program Counter load instruction
     193/    1122 : 351                 	PCHL		; Abuse the Program Counter load instruction
     194/    1123 : 351                 	PCHL		; Abuse the Program Counter load instruction
     195/    1124 : 351                 	PCHL		; Abuse the Program Counter load instruction
     196/    1125 : 351                 	PCHL		; Abuse the Program Counter load instruction
     197/    1126 : 351                 	PCHL		; Abuse the Program Counter load instruction
     198/    1127 : 351                 	PCHL		; Abuse the Program Counter load instruction
     199/    1130 : 351                 	PCHL		; Abuse the Program Counter load instruction
     200/    1131 : 351                 	PCHL		; Abuse the Program Counter load instruction
     201/    1132 : 351                 	PCHL		; Abuse the Program Counter load instruction
     202/    1133 : 351                 	PCHL		; Abuse the Program Counter load instruction
     203/    1134 : 351                 	PCHL		; Abuse the Program Counter load instruction
     204/    1135 : 351                 	PCHL		; Abuse the Program Counter load instruction
     205/    1136 : 351                 	PCHL		; Abuse the Program Counter load instruction
     206/    1137 : 351                 	PCHL		; Abuse the Program Counter load instruction
     207/    1140 : 351                 	PCHL		; Abuse the Program Counter load instruction
     208/    1141 : 351                 	PCHL		; Abuse the Program Counter load instruction
     209/    1142 : 351                 	PCHL		; Abuse the Program Counter load instruction
     210/    1143 : 351                 	PCHL		; Abuse the Program Counter load instruction
     211/    1144 : 351                 	PCHL		; Abuse the Program Counter load instruction
     212/    1145 : 351                 	PCHL		; Abuse the Program Counter load instruction
     213/    1146 : 351                 	PCHL		; Abuse the Program Counter load instruction
     214/    1147 : 351                 	PCHL		; Abuse the Program Counter load instruction
     215/    1150 : 351                 	PCHL		; Abuse the Program Counter load instruction
     216/    1151 : 351                 	PCHL		; Abuse the Program Counter load instruction
     217/    1152 : 351                 	PCHL		; Abuse the Program Counter load instruction
     218/    1153 : 351                 	PCHL		; Abuse the Program Counter load instruction
     219/    1154 : 351                 	PCHL		; Abuse the Program Counter load instruction
     220/    1155 : 351                 	PCHL		; Abuse the Program Counter load instruction
     221/    1156 : 351                 	PCHL		; Abuse the Program Counter load instruction
     222/    1157 : 351                 	PCHL		; Abuse the Program Counter load instruction
     223/    1160 : 351                 	PCHL		; Abuse the Program Counter load instruction
     224/    1161 : 351                 	PCHL		; Abuse the Program Counter load instruction
     225/    1162 : 351                 	PCHL		; Abuse the Program Counter load instruction
     226/    1163 : 351                 	PCHL		; Abuse the Program Counter load instruction
     227/    1164 : 351                 	PCHL		; Abuse the Program Counter load instruction
     228/    1165 : 351                 	PCHL		; Abuse the Program Counter load instruction
     229/    1166 : 351                 	PCHL		; Abuse the Program Counter load instruction
     230/    1167 : 351                 	PCHL		; Abuse the Program Counter load instruction
     231/    1170 : 351                 	PCHL		; Abuse the Program Counter load instruction
     232/    1171 : 351                 	PCHL		; Abuse the Program Counter load instruction
     233/    1172 : 351                 	PCHL		; Abuse the Program Counter load instruction
     234/    1173 : 351                 	PCHL		; Abuse the Program Counter load instruction
 AS V1.42 Beta [Bld 183] - Source File slow-count-deux.asm - Page 6 - 12/04/2020 09:35:07 PM


     235/    1174 : 351                 	PCHL		; Abuse the Program Counter load instruction
     236/    1175 : 351                 	PCHL		; Abuse the Program Counter load instruction
     237/    1176 : 351                 	PCHL		; Abuse the Program Counter load instruction
     238/    1177 :                     
     239/    1177 :                     	END		; End
 AS V1.42 Beta [Bld 183] - Source File slow-count-deux.asm - Page 7 - 12/04/2020 09:35:07 PM


  Symbol Table (* = unused):
  --------------------------

*ABUSE :                       1000 C |
*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
*BIGENDIAN :                      0 - | *BRANCHEXT :                      0 - |
*CASESENSITIVE :                  0 - | *CONSTPI :        3.141592653589793 - |
 COUNT :                         41 C |  CR :                            15 - |
*DATE :                "12/04/2020" - |  DONE :                          65 C |
 ESC :                           33 - | *FALSE :                          0 - |
 FETCH :                         16 C | *FULLPMMU :                       1 - |
*HAS64 :                          1 - | *HASDSP :                         0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
*INEXTMODE :                      0 - | *INLWORDMODE :                    0 - |
*INMAXMODE :                      0 - | *INSRCMODE :                      0 - |
*INSUPMODE :                      0 - |  LF :                            12 - |
*LISTON :                         1 - | *MACEXP :                         7 - |
*MOMCPU :                    100200 - | *MOMCPUNAME :                "8080" - |
 MRST :                           3 - | *NESTMAX :                      400 - |
 NUL :                            0 - | *PACKING :                        0 - |
*PADDING :                        1 - |  RCVD :                           1 - |
*RELAXED :                        0 - |  SENT :                           2 - |
 SIO1D :                         21 - |  SIO1S :                         20 - |
 TAB :                           11 - | *TIME :               "09:35:07 PM" - |
*TRUE :                           1 - | *VERSION :                    12057 - |
 WATCH :                        400 C |  WORDS :                        402 C |
*Z80SYNTAX :                      0 - |

     45 symbols
     30 unused symbols

 AS V1.42 Beta [Bld 183] - Source File slow-count-deux.asm - Page 8 - 12/04/2020 09:35:07 PM


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.00 seconds assembly time

    241 lines source file
      2 passes
      0 errors
      0 warnings
