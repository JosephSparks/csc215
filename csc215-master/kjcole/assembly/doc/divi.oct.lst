 AS V1.42 Beta [Bld 183] - Source File divi.asm - Page 1 - 12/04/2020 09:35:07 PM


       1/       0 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
       2/       0 :                     ;
       3/       0 :                     ; NAME:    divi.asm
       4/       0 :                     ; EDITOR:  Kevin Cole ("The Ubuntourist") <kevin.cole@novawebdevelopment.org>
       5/       0 :                     ; LASTMOD: 2020.11.22 (kjc)
       6/       0 :                     ;
       7/       0 :                     ; DESCRIPTION:
       8/       0 :                     ;
       9/       0 :                     ;     Divide the contents of register pair BC by D.
      10/       0 :                     ;     C will contain the quotient; B will contain the remainder.
      11/       0 :                     ;
      12/       0 :                     ;     See Intel 8080 Assembly Prograamming Manual, pages 53-56.
      13/       0 :                     ;
      14/       0 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      15/       0 :                     
      16/       0 :                     	ORG	000h
      17/       0 :                     
      18/       0 : 006 000             	MVI	B,00h
      19/       2 : 016 143             	MVI	C,63h	; dividend (BC) = 99 decimal
      20/       4 : 026 000             	MVI	D,00h
      21/       6 : 036 011             	MVI	E,09h	; divisor  (DE) =  9 decimal
      22/      10 :                     
      23/      10 : 172                 DIVI:	MOV	A,D	; Negate the divisor
      24/      11 : 057                 	CMA		;    "    "     "
      25/      12 : 127                 	MOV	D,A	;    "    "     "
      26/      13 : 173                 	MOV	A,E	;    "    "     "
      27/      14 : 057                 	CMA		;    "    "     "
      28/      15 : 137                 	MOV	E,A	;    "    "     "
      29/      16 : 023                 	INX	D	; For two's complement
      30/      17 : 041 000 000         	LXI	H,00h	; Initial value for remainder
      31/      22 : 076 021             	MVI	A,11h	; Initialize loop counter
      32/      24 : 345                 DV0:	PUSH	H	; Save remainder
      33/      25 : 031                 	DAD	D	; Subtract divisor (add negative)
      34/      26 : 322 032 000         	JNC	DV1	; Underflow. Restore register pair HL
      35/      31 : 343                 	XTHL
      36/      32 : 341                 DV1:	POP	H
      37/      33 : 365                 	PUSH	PSW	; Save loop counter
      38/      34 : 171                 	MOV	A,C
      39/      35 : 027                 	RAL		; 4 register left shift?
      40/      36 : 117                 	MOV	C,A	; CY->C->B->L->H?
      41/      37 : 170                 	MOV	A,B
      42/      40 : 027                 	RAL
      43/      41 : 107                 	MOV	B,A
      44/      42 : 175                 	MOV	A,L
      45/      43 : 027                 	RAL
      46/      44 : 157                 	MOV	L,A
      47/      45 : 174                 	MOV	A,H
      48/      46 : 027                 	RAL
      49/      47 : 147                 	MOV	H,A
      50/      50 : 361                 	POP	PSW
      51/      51 : 075                 	DCR	A
      52/      52 : 302 024 000         	JNZ	DV0
      53/      55 :                     
      54/      55 :                     ; Post-divide clean-up:
      55/      55 :                     ; Shift remainder right and return in DE
      56/      55 :                     
      57/      55 : 267                 	ORA	A
      58/      56 : 174                 	MOV	A,H
      59/      57 : 037                 	RAR
      60/      60 : 127                 	MOV	D,A
 AS V1.42 Beta [Bld 183] - Source File divi.asm - Page 2 - 12/04/2020 09:35:07 PM


      61/      61 : 175                 	MOV	A,L
      62/      62 : 037                 	RAR
      63/      63 : 137                 	MOV	E,A
      64/      64 : 166                 	HLT
      65/      65 :                     
      66/      65 :                     	END		; End
 AS V1.42 Beta [Bld 183] - Source File divi.asm - Page 3 - 12/04/2020 09:35:07 PM


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
*BIGENDIAN :                      0 - | *BRANCHEXT :                      0 - |
*CASESENSITIVE :                  0 - | *CONSTPI :        3.141592653589793 - |
*DATE :                "12/04/2020" - | *DIVI :                          10 C |
 DV0 :                           24 C |  DV1 :                           32 C |
*FALSE :                          0 - | *FULLPMMU :                       1 - |
*HAS64 :                          1 - | *HASDSP :                         0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
*INEXTMODE :                      0 - | *INLWORDMODE :                    0 - |
*INMAXMODE :                      0 - | *INSRCMODE :                      0 - |
*INSUPMODE :                      0 - | *LISTON :                         1 - |
*MACEXP :                         7 - | *MOMCPU :                    100200 - |
*MOMCPUNAME :                "8080" - | *NESTMAX :                      400 - |
*PACKING :                        0 - | *PADDING :                        1 - |
*RELAXED :                        0 - | *TIME :               "09:35:07 PM" - |
*TRUE :                           1 - | *VERSION :                    12057 - |
*Z80SYNTAX :                      0 - |

     32 symbols
     30 unused symbols

 AS V1.42 Beta [Bld 183] - Source File divi.asm - Page 4 - 12/04/2020 09:35:07 PM


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.00 seconds assembly time

     68 lines source file
      2 passes
      0 errors
      0 warnings
